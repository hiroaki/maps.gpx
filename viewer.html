<!DOCTYPE html>
<html><head><title>GPX Casual Viewer v3</title>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta http-equiv="content-script-type" content="text/javascript" />
<meta http-equiv="content-style-type" content="text/css" />
<style type="text/css">
html { height: 100% }
body { height: 100%; margin: 0px; padding: 0px }
#map_canvas { height: 100% }
img.info-window { max-width: 200px; max-height: 200px; }
</style>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="gpx-casual-viewer.js"></script>
<script type="text/javascript" src="plugin-vertex-info.js"></script>
<script type="text/javascript" src="plugin-file.js"></script>
<script type="text/javascript" src="plugin-url.js"></script>
<script type="text/javascript" src="extlib/exif.js"></script>
<script type="text/javascript" src="plugin-exif.js"></script>
<script type="text/javascript">
(function (){
  GPXCasualViewer.strict = false;
  google.maps.event.addDomListener(window, 'load', function() {
    var app = new GPXCasualViewer('map_canvas');
    app.use('VertexInfo');
    app.use('File');
    app.use('URL');
    app.use('EXIF');

    app.register('onAddGPX', function(key) {
      this.fitBounds(key);
      this.showOverlayWpts(key);
      this.showOverlayRtes(key);
      this.showOverlayTrks(key);
    });

    // app.register('onReadEXIF', (function (key, values){
    //   var contents = '<div><strong>'+ values.exif['DateTimeOriginal'] +' - '+ key + '</strong></div><hr/>'+
    //                  '<div><img class="info-window" src="'+ values.url +'"/></div>';
    //   this.map.panTo(values.latlng);
    //   new google.maps.InfoWindow({
    //     content: contents,
    //     position: values.latlng
    //     }).open(this.map);
    // }).bind(app));

  });
})();
</script>
</head><body>
<div id="map_canvas"></div>
</body></html>
